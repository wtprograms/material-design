<md-field #field [label]="fieldUser.label()" [disabled]="disabled()" [error]="error()" [variant]="fieldUser.variant()"
  [populated]="populated()" (inputContainerClick)="inputContainerClick()" [prefix]="fieldUser.prefix()"
  [suffix]="fieldUser.suffix()" [supportingText]="fieldUser.supportingText()"
  [counter]="showCounter() ? count() : undefined" >
  <ng-content select="[mdFieldLeading]" ngProjectAs="[mdFieldLeading]" />
  <ng-content select="[mdFieldTrailing]" ngProjectAs="[mdFieldTrailing]" />

  @if (type() === 'textarea') {
  <textarea #input [disabled]="disabled()" [(ngModel)]="value" (input)="textInput($event)"
    (beforeinput)="textBeforeInput($event)" rows="1" [maxlength]="maxLength() ?? null"></textarea>
  } @else {
  <input #input [type]="type()" [(ngModel)]="value" [disabled]="disabled()" (input)="textInput($event)"
    (beforeinput)="textBeforeInput($event)" [min]="min() ?? null" [max]="max() ?? null"
    [maxlength]="maxLength() ?? null" (blur)="inputBlur()" [style.width.px]="valueText.offsetWidth + 16" />
  }
  <span #valueText class="value-text">{{ value() }}</span>
</md-field>

<md-popover [target]="field.body" trigger="manual" [(open)]="open" [offset]="4" [useTargetWidth]="true">
  <md-list>
    <ng-content select="md-list-item" />
  </md-list>
</md-popover>

